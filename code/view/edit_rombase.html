<html>
<head>
    <title></title>
    <style>
        @import "this://app/images/public.css";
        html,body{width:*; height:*; overflow:hidden;margin:0;padding:0;color:#000;height:100%;background:#fff;}
        #wrapper{width:*;flow:horizontal-flow;overflow: hidden;padding:8dip;}
        input[type="text"]{border:1dip solid #999;border-radius:2dip;display:inline-block;font-size:11dip;}
        label{font-size:11dip;}
        table{width:100%;}
        th{text-align:left;border-bottom:1dip solid #ccc;padding:16dip 0 4dip 0;}
        td:first-child{font-size:11dip;text-align:right;padding:8dip 0;}
        tr:last-child td{text-align: center;padding-bottom:0}
        .submit{margin:0 8dip}
    </style>
</head>
<body>
    <div id="wrapper">
        <table>
            <tr><td>{{BaseName}}：</td><td><input type="text" id="name" value=""></td></tr>
            <tr><td>{{BaseYear}}：</td><td><input type="number" id="year" value="" maxlength="4"></td></tr>
            <tr><td>{{BaseType}}：</td><td>
                <select id="type" editable>
                    <option value="ACT{{TypeACT}}">ACT{{TypeACT}}</option>
                    <option value="RPG{{TypeRPG}}">RPG{{TypeRPG}}</option>
                    <option value="ARPG{{TypeARPG}}">ARPG{{TypeARPG}}</option>
                    <option value="SRPG{{TypeSRPG}}">SRPG{{TypeSRPG}}</option>
                    <option value="AVG{{TypeAVG}}">AVG{{TypeAVG}}</option>
                    <option value="FTG{{TypeFTG}}">FTG{{TypeFTG}}</option>
                    <option value="MUG{{TypeMUG}}">MUG{{TypeMUG}}</option>
                    <option value="RAC{{TypeRAC}}">RAC{{TypeRAC}}</option>
                    <option value="SLG{{TypeSLG}}">SLG{{TypeSLG}}</option>
                    <option value="SPT{{TypeSPT}}">SPT{{TypeSPT}}</option>
                    <option value="STG{{TypeSTG}}">STG{{TypeSTG}}</option>
                    <option value="TAB{{TypeTAB}}">TAB{{TypeTAB}}</option>
                    <option value="PUZ{{TypePUZ}}">PUZ{{TypePUZ}}</option>
                    <option value="FREE{{TypeFREE}}">FREE{{TypeFREE}}</option>
                </select>
            </td></tr>


            <tr><td>{{BasePlatform}}：</td><td>
            <select id="platform" editable>
                <option value="3DS">3DS</option>
                <option value="ARC">ARC</option>
                <option value="DC">DC</option>
                <option value="FC">FC</option>
                <option value="FUZE">FUZE</option>
                <option value="GB">GB</option>
                <option value="GBA">GBA</option>
                <option value="MD">MD</option>
                <option value="N64">N64</option>
                <option value="NDS">NDS</option>
                <option value="NGC">NGC</option>
                <option value="PC">PC</option>
                <option value="PCE">PCE</option>
                <option value="PS">PS</option>
                <option value="PS2">PS2</option>
                <option value="PS3">PS3</option>
                <option value="PS4">PS4</option>
                <option value="PSP">PSP</option>
                <option value="PSV">PSV</option>
                <option value="SFC">SFC</option>
                <option value="SS">SS</option>
                <option value="Wii">Wii</option>
                <option value="WiiU">WiiU</option>
                <option value="X360">X360</option>
                <option value="XBOX">XBOX</option>
            </select>
            </td></tr>

           
            <tr><td>{{BasePublisher}}：</td><td>
            <select id="publisher" editable>
                <option value="Nintendo">Nintendo</option>
                <option value="Ubisoft">Ubisoft</option>
                <option value="Konami">Konami</option>
                <option value="Sega">Sega</option>
                <option value="Amaze">Amaze</option>
                <option value="Capcom">Capcom</option>
                <option value="Maxis">Maxis</option>
                <option value="Bungie">Bungie</option>
                <option value="Yuke's">Yuke's</option>
            </select>
            </td></tr>
            <tr><td>{{BaseCountry}}：</td><td>
            <select id="country" editable>
                <option value="Nintendo">日本</option>
                <option value="Ubisoft">美国</option>
                <option value="Konami">英国</option>
                <option value="Sega">中国</option>
                <option value="Amaze">法国</option>
                <option value="Capcom">韩国</option>
            </select>
            </td></tr>
            <tr><th colspan="2"></th></tr>
            <tr><td colspan="2"><button class="submit" id="submit">{{Confirm}}</button><button class="submit" id="close-dialog">{{Cancel}}</button></td></tr>
        </table>
    </div>

<script type="text/tiscript">
include ROOTPATH + "tis/utils.tis";

view.root.on("ready", function(){

    //渲染语言
    createLang();
    view.windowCaption = CONF.Lang.EditBaseInfo;

    var getjson = mainView.GetRomBase(view.parameters.id);
    var info = JSON.parse(getjson);
    if(info.Name != undefined && info.Name != ""){$(#name).value = info.Name;}
    if(info.Type != undefined && info.Type != ""){$(#type).value = info.Type;}
    if(info.Year != undefined && info.Year != ""){$(#year).value = info.Year;}
    if(info.Platform != undefined && info.Platform != ""){$(#platform).value = info.Platform;}
    if(info.Publisher != undefined && info.Publisher != ""){$(#publisher).value = info.Publisher;}
    if(info.Country != undefined && info.Country != ""){$(#country).value = info.Country;}

});

event click $(#submit){

    var year = "";
    if($(#year).value != "" && $(#year).value != undefined){
         year = $(#year).value.toString();
    }else{
         year = "";
    }

    var data = {
        id:view.parameters.id;
        name:$(#name).value,
        year:year,
        type:$(#type).value,
        platform:$(#platform).value,
        publisher:$(#publisher).value,
        country:$(#country).value,
    }
    var result = mainView.SetRomBase(JSON.stringify(data));
    view.close(result);
}

event click $(#close-dialog){
    view.close();
}

</script>

</body>
</html>